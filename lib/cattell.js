'use strict';

var tslib_1 = require('tslib');

function buildAnswersValidator(countOfAnswers, validatorArg, invalidScales) {
    var isValid = Array.isArray(validatorArg)
        ? buildAnswerValidator(validatorArg)
        : validatorArg;
    return function anAnswersValidator(answers) {
        if (!answers) {
            return invalidScales;
        }
        if (answers.length !== countOfAnswers) {
            return invalidScales;
        }
        for (var i = 0; i < countOfAnswers; i++) {
            if (!isValid(answers[i], i, answers)) {
                return invalidScales;
            }
        }
    };
}
function buildAnswerValidator(validAnswers) {
    var set = new Set(validAnswers);
    return function setValidatorForAnswer(answer) {
        return set.has(answer);
    };
}

var cattelRawMetadata = [
    /* 1   */ ["", 0, 0, 0],
    /* 2   */ ["", 0, 0, 0],
    /* 3   */ ["A", 2, 1, 0],
    /* 4   */ ["C", 2, 1, 0],
    /* 5   */ ["C", 0, 1, 2],
    /* 6   */ ["E", 0, 1, 2],
    /* 7   */ ["E", 2, 1, 0],
    /* 8   */ ["F", 0, 1, 2],
    /* 9   */ ["G", 0, 1, 2],
    /* 10  */ ["H", 2, 1, 0],
    /* 11  */ ["I", 0, 1, 2],
    /* 12  */ ["I", 2, 1, 0],
    /* 13  */ ["L", 0, 1, 2],
    /* 14  */ ["M", 0, 1, 2],
    /* 15  */ ["M", 0, 1, 2],
    /* 16  */ ["N", 0, 1, 2],
    /* 17  */ ["N", 2, 1, 0],
    /* 18  */ ["O", 2, 1, 0],
    /* 19  */ ["O", 0, 1, 2],
    /* 20  */ ["Q1", 2, 1, 0],
    /* 21  */ ["Q1", 0, 1, 2],
    /* 22  */ ["Q2", 0, 1, 2],
    /* 23  */ ["Q3", 0, 1, 2],
    /* 24  */ ["Q3", 0, 1, 2],
    /* 25  */ ["Q4", 0, 1, 2],
    /* 26  */ ["A", 0, 1, 2],
    /* 27  */ ["A", 0, 1, 2],
    /* 28  */ ["B", 0, 1, 0],
    /* 29  */ ["C", 0, 1, 2],
    /* 30  */ ["C", 2, 1, 0],
    /* 31  */ ["E", 0, 1, 2],
    /* 32  */ ["E", 0, 1, 2],
    /* 33  */ ["F", 2, 1, 0],
    /* 34  */ ["G", 0, 1, 2],
    /* 35  */ ["H", 0, 1, 2],
    /* 36  */ ["H", 2, 1, 0],
    /* 37  */ ["I", 2, 1, 0],
    /* 38  */ ["L", 2, 1, 0],
    /* 39  */ ["M", 2, 1, 0],
    /* 40  */ ["M", 2, 1, 0],
    /* 41  */ ["N", 0, 1, 2],
    /* 42  */ ["N", 2, 1, 0],
    /* 43  */ ["O", 2, 1, 0],
    /* 44  */ ["O", 0, 1, 2],
    /* 45  */ ["Q1", 0, 1, 2],
    /* 46  */ ["Q1", 2, 1, 0],
    /* 47  */ ["Q2", 2, 1, 0],
    /* 48  */ ["Q3", 2, 1, 0],
    /* 49  */ ["Q4", 2, 1, 0],
    /* 50  */ ["Q4", 2, 1, 0],
    /* 51  */ ["A", 0, 1, 2],
    /* 52  */ ["A", 2, 1, 0],
    /* 53  */ ["B", 0, 1, 0],
    /* 54  */ ["B", 0, 1, 0],
    /* 55  */ ["C", 2, 1, 0],
    /* 56  */ ["E", 2, 1, 0],
    /* 57  */ ["E", 0, 1, 2],
    /* 58  */ ["F", 2, 1, 0],
    /* 59  */ ["G", 0, 1, 2],
    /* 60  */ ["H", 0, 1, 2],
    /* 61  */ ["H", 0, 1, 2],
    /* 62  */ ["I", 0, 1, 2],
    /* 63  */ ["L", 0, 1, 2],
    /* 64  */ ["L", 0, 1, 2],
    /* 65  */ ["M", 2, 1, 0],
    /* 66  */ ["N", 0, 1, 2],
    /* 67  */ ["N", 0, 1, 2],
    /* 68  */ ["O", 0, 1, 2],
    /* 69  */ ["O", 2, 1, 0],
    /* 70  */ ["Q1", 2, 1, 0],
    /* 71  */ ["Q2", 2, 1, 0],
    /* 72  */ ["Q2", 2, 1, 0],
    /* 73  */ ["Q3", 2, 1, 0],
    /* 74  */ ["Q4", 2, 1, 0],
    /* 75  */ ["Q4", 0, 1, 2],
    /* 76  */ ["A", 0, 1, 2],
    /* 77  */ ["B", 0, 0, 1],
    /* 78  */ ["B", 0, 1, 0],
    /* 79  */ ["C", 0, 1, 2],
    /* 80  */ ["C", 0, 1, 2],
    /* 81  */ ["E", 0, 1, 2],
    /* 82  */ ["F", 0, 1, 2],
    /* 83  */ ["F", 2, 1, 0],
    /* 84  */ ["G", 0, 1, 2],
    /* 85  */ ["H", 0, 1, 2],
    /* 86  */ ["H", 0, 1, 2],
    /* 87  */ ["I", 0, 1, 2],
    /* 88  */ ["L", 2, 1, 0],
    /* 89  */ ["L", 0, 1, 2],
    /* 90  */ ["M", 0, 1, 2],
    /* 91  */ ["M", 2, 1, 0],
    /* 92  */ ["N", 0, 1, 2],
    /* 93  */ ["O", 0, 1, 2],
    /* 94  */ ["O", 2, 1, 0],
    /* 95  */ ["Q1", 0, 1, 2],
    /* 96  */ ["Q2", 0, 1, 2],
    /* 97  */ ["Q2", 0, 1, 2],
    /* 98  */ ["Q3", 2, 1, 0],
    /* 99  */ ["Q4", 2, 1, 0],
    /* 100 */ ["Q4", 0, 1, 2],
    /* 101 */ ["A", 2, 1, 0],
    /* 102 */ ["B", 0, 0, 1],
    /* 103 */ ["B", 0, 1, 0],
    /* 104 */ ["C", 2, 1, 0],
    /* 105 */ ["C", 2, 1, 0],
    /* 106 */ ["E", 0, 1, 2],
    /* 107 */ ["F", 0, 1, 2],
    /* 108 */ ["F", 0, 1, 2],
    /* 109 */ ["G", 2, 1, 0],
    /* 110 */ ["H", 2, 1, 0],
    /* 111 */ ["H", 2, 1, 0],
    /* 112 */ ["I", 2, 1, 0],
    /* 113 */ ["L", 2, 1, 0],
    /* 114 */ ["L", 2, 1, 0],
    /* 115 */ ["M", 2, 1, 0],
    /* 116 */ ["M", 2, 1, 0],
    /* 117 */ ["N", 2, 1, 0],
    /* 118 */ ["O", 2, 1, 0],
    /* 119 */ ["O", 2, 1, 0],
    /* 120 */ ["Q1", 0, 1, 2],
    /* 121 */ ["Q2", 0, 1, 2],
    /* 122 */ ["Q2", 0, 1, 2],
    /* 123 */ ["Q3", 0, 1, 2],
    /* 124 */ ["Q4", 2, 1, 0],
    /* 125 */ ["Q4", 0, 1, 2],
    /* 126 */ ["A", 2, 1, 0],
    /* 127 */ ["B", 0, 0, 1],
    /* 128 */ ["B", 0, 1, 0],
    /* 129 */ ["C", 0, 1, 2],
    /* 130 */ ["C", 2, 1, 0],
    /* 131 */ ["E", 2, 1, 0],
    /* 132 */ ["F", 2, 1, 0],
    /* 133 */ ["F", 2, 1, 0],
    /* 134 */ ["G", 2, 1, 0],
    /* 135 */ ["H", 2, 1, 0],
    /* 136 */ ["H", 2, 1, 0],
    /* 137 */ ["I", 0, 1, 2],
    /* 138 */ ["I", 2, 1, 0],
    /* 139 */ ["L", 0, 1, 2],
    /* 140 */ ["M", 2, 1, 0],
    /* 141 */ ["M", 0, 1, 2],
    /* 142 */ ["N", 2, 1, 0],
    /* 143 */ ["O", 2, 1, 0],
    /* 144 */ ["O", 0, 1, 2],
    /* 145 */ ["Q1", 2, 1, 0],
    /* 146 */ ["Q2", 2, 1, 0],
    /* 147 */ ["Q3", 0, 1, 2],
    /* 148 */ ["Q3", 2, 1, 0],
    /* 149 */ ["Q4", 2, 1, 0],
    /* 150 */ ["Q4", 0, 1, 2],
    /* 151 */ ["A", 0, 1, 2],
    /* 152 */ ["B", 1, 0, 0],
    /* 153 */ ["B", 0, 0, 1],
    /* 154 */ ["C", 0, 1, 2],
    /* 155 */ ["E", 2, 1, 0],
    /* 156 */ ["E", 2, 1, 0],
    /* 157 */ ["F", 0, 1, 2],
    /* 158 */ ["F", 0, 1, 2],
    /* 159 */ ["G", 0, 1, 2],
    /* 160 */ ["G", 2, 1, 0],
    /* 161 */ ["H", 0, 1, 2],
    /* 162 */ ["I", 0, 1, 2],
    /* 163 */ ["I", 2, 1, 0],
    /* 164 */ ["L", 2, 1, 0],
    /* 165 */ ["M", 0, 1, 2],
    /* 166 */ ["M", 0, 1, 2],
    /* 167 */ ["N", 2, 1, 0],
    /* 168 */ ["O", 0, 1, 2],
    /* 169 */ ["Q1", 2, 1, 0],
    /* 170 */ ["Q1", 0, 1, 2],
    /* 171 */ ["Q2", 2, 1, 0],
    /* 172 */ ["Q3", 0, 1, 2],
    /* 173 */ ["Q3", 2, 1, 0],
    /* 174 */ ["Q4", 2, 1, 0],
    /* 175 */ ["Q4", 0, 1, 2],
    /* 176 */ ["A", 2, 1, 0],
    /* 177 */ ["B", 1, 0, 0],
    /* 178 */ ["B", 1, 0, 0],
    /* 179 */ ["C", 2, 1, 0],
    /* 180 */ ["E", 2, 1, 0],
    /* 181 */ ["E", 2, 1, 0],
    /* 182 */ ["F", 2, 1, 0],
    /* 183 */ ["F", 2, 1, 0],
    /* 184 */ ["G", 2, 1, 0],
    /* 185 */ ["G", 2, 1, 0],
    /* 186 */ ["H", 2, 1, 0],
    /* 187 */ ["", 0, 0, 0],
].map(function (_a) {
    var scale = _a[0], A = _a[1], B = _a[2], C = _a[3];
    return ({
        scale: scale,
        scores: { A: A, B: B, C: C },
    });
});

var createBlankScales = function (v) {
    return {
        A: v,
        B: v,
        C: v,
        E: v,
        F: v,
        G: v,
        H: v,
        I: v,
        L: v,
        M: v,
        N: v,
        O: v,
        Q1: v,
        Q2: v,
        Q3: v,
        Q4: v,
    };
};

var F1618 = [
    {
        scale: "A",
        scores: [
            [0, 6],
            [7, 8],
            [7, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 15],
            [16, 16],
            [17, 18],
            [19, 20],
        ],
    }, {
        scale: "B",
        scores: [
            [0, 1],
            [2, 2],
            [3, 3],
            [4, 4],
            [5, 5],
            [6, 6],
            [7, 7],
            [8, 9],
            [10, 10],
            [11, 12],
        ],
    }, {
        scale: "C",
        scores: [
            [0, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 14],
            [15, 16],
            [17, 18],
            [19, 20],
            [21, 21],
            [22, 26],
        ],
    }, {
        scale: "E",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 15],
            [16, 17],
            [18, 19],
            [20, 26],
        ],
    }, {
        scale: "F",
        scores: [
            [0, 6],
            [7, 8],
            [9, 11],
            [12, 14],
            [15, 16],
            [17, 18],
            [19, 20],
            [21, 22],
            [23, 23],
            [24, 26],
        ],
    }, {
        scale: "G",
        scores: [
            [0, 5],
            [6, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 17],
            [18, 18],
            [19, 20],
        ],
    }, {
        scale: "H",
        scores: [
            [0, 2],
            [3, 4],
            [5, 7],
            [8, 9],
            [10, 12],
            [13, 14],
            [15, 17],
            [18, 20],
            [21, 22],
            [23, 26],
        ],
    }, {
        scale: "I",
        scores: [
            [0, 5],
            [6, 7],
            [8, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "L",
        scores: [
            [0, 2],
            [3, 3],
            [4, 5],
            [6, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 14],
            [15, 16],
        ],
    }, {
        scale: "M",
        scores: [
            [0, 6],
            [7, 7],
            [8, 9],
            [10, 10],
            [11, 12],
            [13, 14],
            [15, 16],
            [17, 17],
            [18, 19],
            [20, 28],
        ],
    }, {
        scale: "N",
        scores: [
            [0, 5],
            [6, 6],
            [7, 7],
            [8, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 15],
            [16, 20],
        ],
    }, {
        scale: "O",
        scores: [
            [0, 4],
            [5, 5],
            [6, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 26],
        ],
    }, {
        scale: "Q1",
        scores: [
            [0, 3],
            [4, 4],
            [5, 5],
            [6, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 12],
            [13, 14],
            [15, 20],
        ],
    }, {
        scale: "Q2",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "Q3",
        scores: [
            [0, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 10],
            [11, 12],
            [13, 13],
            [14, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "Q4",
        scores: [
            [0, 3],
            [4, 5],
            [6, 8],
            [9, 11],
            [12, 13],
            [14, 16],
            [17, 19],
            [20, 21],
            [22, 23],
            [24, 26],
        ],
    },
];
var M1618 = [
    {
        scale: "A",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 12],
            [13, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "B",
        scores: [
            [0, 1],
            [2, 2],
            [3, 3],
            [4, 4],
            [5, 5],
            [6, 6],
            [7, 7],
            [8, 9],
            [10, 10],
            [11, 12],
        ],
    }, {
        scale: "C",
        scores: [
            [0, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 20],
            [21, 22],
            [23, 26],
        ],
    }, {
        scale: "E",
        scores: [
            [0, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 21],
            [22, 26],
        ],
    }, {
        scale: "F",
        scores: [
            [0, 5],
            [6, 8],
            [9, 11],
            [12, 14],
            [15, 16],
            [17, 18],
            [19, 20],
            [21, 22],
            [23, 23],
            [24, 26],
        ],
    }, {
        scale: "G",
        scores: [
            [0, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 14],
            [15, 16],
            [17, 17],
            [18, 18],
            [19, 20],
        ],
    }, {
        scale: "H",
        scores: [
            [0, 2],
            [3, 4],
            [5, 7],
            [8, 10],
            [11, 13],
            [14, 16],
            [17, 18],
            [19, 20],
            [21, 22],
            [23, 26],
        ],
    }, {
        scale: "I",
        scores: [
            [0, 2],
            [3, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 20],
        ],
    }, {
        scale: "L",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "M",
        scores: [
            [0, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 18],
            [19, 26],
        ],
    }, {
        scale: "N",
        scores: [
            [0, 5],
            [6, 7],
            [8, 8],
            [9, 9],
            [10, 10],
            [11, 12],
            [13, 13],
            [14, 15],
            [16, 16],
            [17, 20],
        ],
    }, {
        scale: "O",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 26],
        ],
    }, {
        scale: "Q1",
        scores: [
            [0, 4],
            [5, 5],
            [6, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 12],
            [13, 13],
            [14, 15],
            [16, 20],
        ],
    }, {
        scale: "Q2",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "Q3",
        scores: [
            [0, 3],
            [4, 5],
            [6, 6],
            [7, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 18],
            [17, 20],
        ],
    }, {
        scale: "Q4",
        scores: [
            [0, 2],
            [3, 4],
            [5, 6],
            [7, 8],
            [10, 12],
            [13, 15],
            [16, 17],
            [18, 19],
            [2, 21],
            [22, 26],
        ],
    },
];
var F1928 = [
    {
        scale: "A",
        scores: [
            [0, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 12],
            [13, 13],
            [14, 15],
            [16, 16],
            [17, 18],
            [19, 20],
        ],
    }, {
        scale: "B",
        scores: [
            [0, 4],
            [5, 5],
            [NaN, NaN],
            [6, 6],
            [7, 7],
            [8, 8],
            [9, 9],
            [10, 10],
            [11, 11],
            [12, 13],
        ],
    }, {
        scale: "C",
        scores: [
            [0, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 14],
            [15, 16],
            [17, 18],
            [19, 20],
            [21, 22],
            [23, 26],
        ],
    }, {
        scale: "E",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 14],
            [15, 16],
            [17, 18],
            [19, 26],
        ],
    }, {
        scale: "F",
        scores: [
            [0, 5],
            [6, 7],
            [8, 10],
            [11, 12],
            [13, 15],
            [16, 17],
            [18, 19],
            [20, 21],
            [22, 22],
            [23, 26],
        ],
    }, {
        scale: "G",
        scores: [
            [0, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 13],
            [14, 15],
            [16, 17],
            [18, 18],
            [19, 20],
        ],
    }, {
        scale: "H",
        scores: [
            [0, 2],
            [3, 4],
            [5, 7],
            [8, 9],
            [10, 12],
            [13, 15],
            [10, 17],
            [18, 20],
            [21, 22],
            [23, 26],
        ],
    }, {
        scale: "I",
        scores: [
            [0, 5],
            [6, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 13],
            [14, 14],
            [15, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "L",
        scores: [
            [0, 1],
            [2, 3],
            [4, 4],
            [5, 5],
            [6, 7],
            [8, 9],
            [10, 10],
            [11, 12],
            [13, 14],
            [15, 20],
        ],
    }, {
        scale: "M",
        scores: [
            [0, 5],
            [6, 7],
            [8, 8],
            [9, 10],
            [11, 12],
            [13, 14],
            [15, 16],
            [17, 17],
            [18, 19],
            [20, 26],
        ],
    }, {
        scale: "N",
        scores: [
            [0, 5],
            [6, 6],
            [7, 7],
            [8, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "O",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 12],
            [13, 14],
            [15, 16],
            [17, 18],
            [19, 26],
        ],
    }, {
        scale: "Q1",
        scores: [
            [0, 3],
            [4, 4],
            [5, 5],
            [6, 7],
            [8, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 14],
            [15, 20],
        ],
    }, {
        scale: "Q2",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "Q3",
        scores: [
            [0, 4],
            [5, 5],
            [6, 7],
            [8, 9],
            [10, 10],
            [11, 12],
            [13, 13],
            [14, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "Q4",
        scores: [
            [0, 3],
            [4, 5],
            [6, 7],
            [8, 10],
            [11, 12],
            [13, 15],
            [16, 18],
            [19, 20],
            [21, 22],
            [23, 26],
        ],
    },
];
var M1928 = [
    {
        scale: "A",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "B",
        scores: [
            [0, 4],
            [5, 5],
            [NaN, NaN],
            [6, 6],
            [7, 7],
            [8, 8],
            [9, 9],
            [10, 10],
            [11, 11],
            [12, 13],
        ],
    }, {
        scale: "C",
        scores: [
            [0, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 21],
            [22, 22],
            [23, 26],
        ],
    }, {
        scale: "E",
        scores: [
            [0, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 16],
            [17, 18],
            [19, 19],
            [20, 21],
            [22, 26],
        ],
    }, {
        scale: "F",
        scores: [
            [0, 5],
            [6, 8],
            [9, 10],
            [11, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 21],
            [22, 23],
            [24, 46],
        ],
    }, {
        scale: "G",
        scores: [
            [0, 4],
            [5, 8],
            [7, 9],
            [10, 11],
            [12, 12],
            [13, 14],
            [15, 16],
            [17, 17],
            [18, 19],
            [20, 20],
        ],
    }, {
        scale: "H",
        scores: [
            [0, 2],
            [3, 4],
            [5, 7],
            [8, 10],
            [11, 18],
            [14, 16],
            [17, 18],
            [19, 20],
            [21, 22],
            [23, 26],
        ],
    }, {
        scale: "I",
        scores: [
            [0, 2],
            [3, 3],
            [4, 5],
            [6, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 14],
            [15, 15],
            [16, 20],
        ],
    }, {
        scale: "L",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 12],
            [13, 14],
            [15, 15],
            [16, 20],
        ],
    }, {
        scale: "M",
        scores: [
            [0, 5],
            [6, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 18],
            [19, 20],
        ],
    }, {
        scale: "N",
        scores: [
            [0, 5],
            [6, 7],
            [8, 8],
            [9, 9],
            [10, 10],
            [11, 12],
            [13, 13],
            [14, 15],
            [16, 16],
            [17, 20],
        ],
    }, {
        scale: "O",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 26],
        ],
    }, {
        scale: "Q1",
        scores: [
            [0, 4],
            [5, 5],
            [6, 6],
            [7, 8],
            [9, 9],
            [10, 10],
            [11, 12],
            [13, 13],
            [14, 15],
            [16, 20],
        ],
    }, {
        scale: "Q2",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "Q3",
        scores: [
            [0, 3],
            [4, 5],
            [6, 6],
            [7, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "Q4",
        scores: [
            [0, 3],
            [4, 4],
            [5, 7],
            [8, 9],
            [10, 12],
            [13, 14],
            [15, 17],
            [18, 19],
            [20, 21],
            [22, 26],
        ],
    },
];
var F2970 = [
    {
        scale: "A",
        scores: [
            [0, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 15],
            [16, 16],
            [17, 18],
            [19, 20],
        ],
    }, {
        scale: "B",
        scores: [
            [0, 1],
            [2, 2],
            [3, 3],
            [4, 4],
            [5, 5],
            [6, 6],
            [7, 7],
            [8, 9],
            [10, 10],
            [11, 13],
        ],
    }, {
        scale: "C",
        scores: [
            [0, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [18, 17],
            [18, 20],
            [21, 22],
            [23, 24],
            [25, 26],
        ],
    }, {
        scale: "E",
        scores: [
            [0, 2],
            [3, 3],
            [4, 5],
            [6, 7],
            [8, 9],
            [10, 11],
            [12, 14],
            [15, 18],
            [17, 18],
            [19, 26],
        ],
    }, {
        scale: "F",
        scores: [
            [0, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 21],
            [22, 26],
        ],
    }, {
        scale: "G",
        scores: [
            [0, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 16],
            [17, 17],
            [18, 19],
            [20, 20],
        ],
    }, {
        scale: "H",
        scores: [
            [0, 2],
            [3, 4],
            [5, 7],
            [8, 9],
            [10, 12],
            [13, 14],
            [15, 17],
            [18, 20],
            [21, 22],
            [23, 26],
        ],
    }, {
        scale: "I",
        scores: [
            [0, 5],
            [6, 7],
            [8, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 18],
            [17, 17],
            [18, 20],
        ],
    }, {
        scale: "L",
        scores: [
            [0, 1],
            [2, 2],
            [3, 4],
            [5, 5],
            [6, 7],
            [8, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 20],
        ],
    }, {
        scale: "M",
        scores: [
            [0, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 12],
            [13, 14],
            [15, 16],
            [17, 17],
            [18, 19],
            [20, 26],
        ],
    }, {
        scale: "N",
        scores: [
            [0, 5],
            [6, 6],
            [7, 7],
            [8, 9],
            [10, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 15],
            [16, 20],
        ],
    }, {
        scale: "O",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 14],
            [15, 18],
            [17, 18],
            [19, 26],
        ],
    }, {
        scale: "Q1",
        scores: [
            [0, 3],
            [4, 4],
            [5, 5],
            [6, 7],
            [8, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 14],
            [15, 20],
        ],
    }, {
        scale: "Q2",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "Q3",
        scores: [
            [0, 5],
            [6, 7],
            [8, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 17],
            [18, 20],
        ],
    }, {
        scale: "Q4",
        scores: [
            [0, 2],
            [3, 4],
            [5, 7],
            [8, 10],
            [11, 12],
            [13, 15],
            [18, 17],
            [18, 20],
            [21, 22],
            [23, 26],
        ],
    },
];
var M2970 = [
    {
        scale: "A",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "B",
        scores: [
            [0, 1],
            [2, 2],
            [3, 3],
            [4, 4],
            [5, 5],
            [6, 6],
            [7, 7],
            [8, 9],
            [10, 10],
            [11, 13],
        ],
    }, {
        scale: "C",
        scores: [
            [0, 7],
            [8, 10],
            [11, 12],
            [13, 14],
            [15, 16],
            [17, 17],
            [18, 19],
            [20, 21],
            [22, 23],
            [24, 26],
        ],
    }, {
        scale: "E",
        scores: [
            [0, 5],
            [6, 7],
            [8, 9],
            [10, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 21],
            [22, 26],
        ],
    }, {
        scale: "F",
        scores: [
            [0, 3],
            [4, 5],
            [6, 8],
            [9, 10],
            [11, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 20],
            [21, 26],
        ],
    }, {
        scale: "G",
        scores: [
            [0, 4],
            [5, 7],
            [8, 10],
            [11, 12],
            [13, 13],
            [14, 15],
            [16, 17],
            [18, 18],
            [19, 19],
            [20, 20],
        ],
    }, {
        scale: "H",
        scores: [
            [0, 3],
            [4, 5],
            [6, 8],
            [9, 11],
            [12, 14],
            [15, 16],
            [17, 19],
            [20, 21],
            [22, 23],
            [24, 26],
        ],
    }, {
        scale: "I",
        scores: [
            [0, 2],
            [3, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 12],
            [13, 14],
            [15, 15],
            [16, 20],
        ],
    }, {
        scale: "L",
        scores: [
            [0, 2],
            [3, 3],
            [4, 5],
            [6, 7],
            [8, 8],
            [9, 10],
            [11, 12],
            [13, 13],
            [14, 15],
            [16, 20],
        ],
    }, {
        scale: "M",
        scores: [
            [0, 5],
            [6, 7],
            [8, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 19],
            [20, 26],
        ],
    }, {
        scale: "N",
        scores: [
            [0, 6],
            [7, 7],
            [8, 9],
            [10, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "O",
        scores: [
            [0, 2],
            [3, 3],
            [4, 5],
            [6, 7],
            [8, 9],
            [10, 11],
            [12, 12],
            [13, 15],
            [16, 17],
            [18, 26],
        ],
    }, {
        scale: "Q1",
        scores: [
            [0, 4],
            [5, 6],
            [7, 7],
            [8, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 14],
            [15, 16],
            [17, 20],
        ],
    }, {
        scale: "Q2",
        scores: [
            [0, 3],
            [4, 4],
            [5, 6],
            [7, 8],
            [9, 10],
            [11, 11],
            [12, 13],
            [14, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "Q3",
        scores: [
            [0, 4],
            [5, 6],
            [7, 8],
            [9, 9],
            [10, 11],
            [12, 12],
            [13, 14],
            [15, 15],
            [16, 17],
            [18, 20],
        ],
    }, {
        scale: "Q4",
        scores: [
            [0, 0],
            [1, 2],
            [3, 5],
            [6, 7],
            [8, 10],
            [11, 12],
            [13, 15],
            [16, 17],
            [18, 19],
            [20, 26],
        ],
    },
];
var stenMetadata = {
    F1618: F1618,
    M1618: M1618,
    F1928: F1928,
    M1928: M1928,
    F2970: F2970,
    M2970: M2970,
};

var GENDER_QUESTION_INDEX = 187;
var AGE_QUESTION_INDEX = 188;
var TOTAL_QUESTIONS = 189;
var invalidScales = Object.freeze(createBlankScales(NaN));
var isAnswerValid = function (answer) { return answer === "A" || answer === "B" || answer === "C"; };
var isGenderValid = function (gender) { return gender === "M" || gender === "F"; };
var isAgeValid = function (age) { return (16 <= age) && (age <= 70); };
var validate = buildAnswersValidator(TOTAL_QUESTIONS, function cattellAnswerValidator(answer, index) {
    switch (index) {
        case GENDER_QUESTION_INDEX:
            return isGenderValid(answer);
        case AGE_QUESTION_INDEX:
            return isAgeValid(answer);
        default:
            return isAnswerValid(answer);
    }
}, invalidScales);
function calculateRaw(answers) {
    var scales = createBlankScales(0);
    for (var index = 0; index < cattelRawMetadata.length; index++) {
        var _a = cattelRawMetadata[index], scale = _a.scale, scores = _a.scores;
        if (scale === "") {
            continue;
        }
        scales[scale] += scores[answers[index]];
    }
    return scales;
}
function calculateNormalized(answers, raw) {
    var gender = answers[GENDER_QUESTION_INDEX];
    var age = answers[AGE_QUESTION_INDEX];
    var stenTableId = getSTenScoreTableId(gender, age);
    var stenTable = stenMetadata[stenTableId];
    var scales = createBlankScales(NaN);
    stenTable.forEach(function (_a) {
        var scale = _a.scale, scores = _a.scores;
        var value = raw[scale];
        scales[scale] = scores.findIndex(function (_a) {
            var min = _a[0], max = _a[1];
            return (min <= value) && (value <= max);
        }) + 1;
    });
    return scales;
}
function getSTenScoreTableId(gender, age) {
    var suffix = (age <= 18) ? "1618" : (age <= 28) ? "1928" : "2970";
    return gender + suffix;
}
function calculate(answers) {
    var raw = calculateRaw(answers);
    var normalized = calculateNormalized(answers, raw);
    return tslib_1.__assign({}, normalized, { raw: raw });
}
function cattell(answers) {
    return validate(answers) || calculate(answers);
}

module.exports = cattell;
